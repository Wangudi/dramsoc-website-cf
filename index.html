<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Strathmore Drama Society (DRAMSOC)</title>
  <link href="https://fonts.googleapis.com/css?family=Poppins:600,400|Lora:700,400" rel="stylesheet" />
  <style>
    /* ================= ORIGINAL STYLES (kept mostly intact) ================= */
    :root {
      --gold: #ffd700;
      --red: #b80000;
      --bg: #111111;
    }
    body {
      background: var(--bg);
      color: #fff;
      font-family: "Poppins", Arial, sans-serif;
      margin: 0;
      overflow-x: hidden;
    }
     header {
      background: linear-gradient(90deg, #1c1c1c, #000000);
      color: var(--gold);
      display: flex;
      align-items: center;
      gap: 1em;
      padding: 0.4em 1.5em;
      position: sticky;
      top: 0;
      z-index: 1200;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
    }
    .site-logo {
      width: 120px;
      height: 120px;
      display: inline-block;
      object-fit: contain;
    }
    /* Nav - default (desktop) */
    nav {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    nav a {
      color: var(--gold);
      text-decoration: none;
      margin-left: 20px;
      font-weight: 500;
      font-size: 1em;
      transition: color 0.2s;
    }
    nav a:hover {
      color: #fff;
      text-shadow: 0 0 8px #ffd700aa;
    }

    .hero {
      background: linear-gradient(135deg, #222144, #b80000 100%);
      min-height: 50vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 64px 18px;
    }
    h1,h2,h3 { font-family: "Lora", serif; color: var(--gold); }
    .motto { color: var(--red); font-size: 1.2em; font-family: "Lora", serif; letter-spacing: 2px; margin-bottom: 18px; }

    .events-upcoming {
      margin: 0 auto 32px auto;
      padding: 40px 28px;
      background: linear-gradient(120deg, #251544, #423b79 80%);
      color: #fff;
      border-radius: 24px;
      min-width: 270px;
      min-height: 130px;
      max-width: 680px;
      font-family: "Lora", serif;
      font-style: italic;
      font-weight: 600;
      letter-spacing: 1.5px;
      font-size: 1.6em;
      box-shadow: 0 8px 44px #22154488;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      animation: scalePulse 2.6s infinite;
      text-shadow: 0 1px 10px #22154488;
    }
    .events-upcoming-title { color: var(--gold); margin-bottom: 20px; font-size: 1.3em; font-family: inherit; font-style: normal; font-weight: bold; letter-spacing: 2px; text-shadow: 0 2px 12px #423b7977; }
    .events-message { font-size: 1.06em; opacity: 0.88; }
    @keyframes scalePulse { 0%{transform:scale(1)}50%{transform:scale(1.03)}100%{transform:scale(1)} }

    .section { padding: 90px 36px; max-width: 1200px; margin: 0 auto; }
    .card-grid,.team-grid { display:flex; gap:2em; flex-wrap:wrap; justify-content:center; }
    .card { background:#222; border-radius:12px; padding:1.4em 1em; margin-bottom:22px; box-shadow:0 4px 32px #b8000044; max-width:340px; transition: transform 0.18s, box-shadow 0.18s; }
    .card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 10px 44px #b80000bb; }
    .card img { width:100%; border-radius:8px; display:block; }
    .btn, .btn-gold, .learn-more-btn { background: var(--gold); color:#111; border:none; border-radius:6px; padding:13px 2em; font-weight:700; margin-top:10px; font-size:1em; cursor:pointer; transition: background 0.22s, color 0.18s;}
    .btn-gold:hover, .btn:hover, .learn-more-btn:hover { background: var(--red); color:#fff; }

    .team-card { background:#262626; border-radius:8px; padding:1em 2.5em 1.4em; text-align:center; width:396px; max-width:95vw; box-sizing:border-box; margin:0 auto; }
    .team-card img { width:200px; height:200px; border-radius:0; object-fit:cover; margin-bottom:8px; }
    .team-card b { display:block; font-size:1.1em; margin-bottom:6px; color:var(--gold); }
    .team-card .role { font-size:0.9em; color:#ddd; margin-top:2px; }

    footer { background:#111; color:var(--gold); text-align:center; padding:30px 5px; margin-top:36px; }

    /* production modal */
    #productionModal { display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background: rgba(34,20,68,0.95); z-index:9999; align-items:center; justify-content:center; }
    #productionModal > div { background:#222144; border-radius:16px; padding:32px; max-width:90vw; max-height:86vh; overflow:auto; color:#fff; box-shadow:0 12px 48px #0008; position:relative; animation: scalePulse 1.7s; }
    /* image container inside modal to hold placeholders and limit size */
    .modal-image { max-width:220px; height:auto; border-radius:10px; object-fit:contain; margin:0 10px 10px 0; box-shadow:0 2px 18px #1118; background: linear-gradient(180deg,#222 0%, #2b2540 100%); display:block; }

    /* article modal */
    #articleModal { display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); color:#fff; overflow:auto; padding:2rem; z-index:10000; }
    #articleModal > div { max-width:900px; margin:0 auto; background:#222144; border-radius:16px; padding:24px; position:relative; }

    /* small spinner for progressive load */
    .img-spinner {
      display:inline-block;
      width:28px;
      height:28px;
      border-radius:50%;
      border:3px solid rgba(255,255,255,0.12);
      border-top-color: rgba(255,255,255,0.7);
      animation: spin 1s linear infinite;
      vertical-align: middle;
      margin-right:8px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ================= NEW: Toggle / Slide-in menu ================= */
    .menu-toggle { display:none; font-size:28px; color:var(--gold); cursor:pointer; margin-left:auto; user-select:none; z-index:1300; background:transparent; border:none; }
    /* overlay to dim background when menu is open */
    .overlay { position:fixed; inset:0; background: rgba(0,0,0,0.45); opacity:0; pointer-events:none; transition: opacity 0.32s ease; z-index:1250; }
    .overlay.active { opacity:1; pointer-events:all; }

    @media (max-width:700px) {
      .card-grid, .team-grid { flex-direction:column; align-items:center; }
      .card { max-width:100%; }
      header { flex-direction:row; align-items:center; gap:0.5em; }
      nav { margin:0; }

      /* show hamburger */
      .menu-toggle { display:block; }

      /* convert nav into off-canvas panel from right */
      nav {
        position: fixed;
        top: 0;
        right: -320px;  /* hidden off-screen */
        width: 150px;
        height: 60vh;
        background: rgba(0,0,0,0.95); /* transparent dark (not glass) */
        box-shadow: -8px 0 30px rgba(0,0,0,0.6);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 84px; /* space for header */
        gap: 12px;
        transition: right 0.32s cubic-bezier(.2,.9,.2,1);
        z-index: 1300;
      }
      nav.menu-active { right: 0; }

      /* stacked items; smaller font; gold color */
      nav a {
        margin: 0;
        color: var(--gold);
        font-size: 0.95em;
        padding: 12px 20px;
        width: 50%;
        text-align: center;
        border-bottom: 1px solid rgba(255,215,0,0.04);
        letter-spacing: 0.1px;
      }
      nav a:hover { color: #fff; background: rgba(255,215,0,0.03); }

      /* close (×) button inside panel - hidden in desktop */
      nav .close-panel {
        position: absolute;
        top: 12px;
        right: 12px;
        font-size: 28px;
        color: var(--gold);
        background: transparent;
        border: none;
        cursor: pointer;
        z-index:1310;
      }
    }
    /* end toggle styles */

    @media(max-width:700px){
      header { flex-direction: column; align-items: flex-start; gap:0.5em; }
      nav { margin:0; }
    }
  </style>
</head>
<body>
  <header>
    <img src="images/logo/No background white logo.png" alt="DRAMSOC Logo" class="site-logo" />

    <!-- MENU TOGGLE (inserted) -->
    <button class="menu-toggle" id="menuToggle" aria-label="Open menu" aria-expanded="false" aria-controls="mainNav">☰</button>

    <!-- Navigation (unchanged for large screens; becomes slide-panel on small screens) -->
    <nav id="mainNav" aria-label="Primary navigation" aria-hidden="true">
      <button class="close-panel" id="closePanel" aria-label="Close menu" style="display:none;">&times;</button>

      <!-- Links: requested list -->
      <a href="#home">Home</a>
      <a href="#about">About Us</a>
      <a href="#team">Team</a>
      <a href="#departments">Departments</a>
      <a href="#alumni">Alumni</a>
      <a href="#articles">Articles</a>
      <a href="#contact">Contact</a>
      <a href="#join">Join Us</a>
    </nav>
  </header>

  <!-- Overlay -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <main>
    <section id="home" class="hero">
      <h1>Take It to the Next Level!</h1>
      <div class="events-upcoming">
        <span class="events-upcoming-title">UPCOMING SHOWS / EVENTS</span>
        <div class="events-message">No updates, check back later</div>
      </div>
      <a class="btn btn-gold" href="#join">Join Us Today</a>
    </section>

    <section id="about" class="section">
      <h2>About Us</h2>
      <div class="card-grid">
        <div class="card">
          <h3>Our Mission</h3>
          <p>To enhance and encourage teamwork, improve the quality of life by building, developing and nurturing talent through social, theatrical and community life at large.</p>
        </div>
        <div class="card">
          <h3>Our Vision</h3>
          <p>To be a premier arts institution in Kenya and beyond, inspiring creativity, fostering cultural dialogue, and empowering individuals to use the transformative power of theatre and film for personal and societal growth.</p>
        </div>
        <div class="card">
          <h3>Our Motto</h3>
          <p>“Take it to the next level!”</p>
        </div>
      </div>
    </section>

    <section id="productions" class="section">
      <h2>Recent Productions</h2>
      <div class="card-grid">
        <div class="card">
          <!-- add lazy to main card images too (non-modal) -->
          <img src="images/productions/The Waiting Room (2).jpg" alt="Waiting Room Poster" loading="lazy" />
          <h3>The Waiting Room</h3>
          <p>Family secrets unravel in a hospital waiting room.</p>
          <button class="btn learn-more-btn" onclick="showProduction('waiting-room')">Learn More</button>
        </div>
        <div class="card">
          <img src="images/productions/The Homecoming (1).jpg" alt="Homecoming Poster" loading="lazy" />
          <h3>The Homecoming</h3>
          <p>A comedic but tense family reunion in Nairobi.</p>
          <button class="btn learn-more-btn" onclick="showProduction('homecoming')">Learn More</button>
        </div>
        <div class="card">
          <img src="images/productions/The Samaritan (1).jpg" alt="Samaritan Poster" loading="lazy" />
          <h3>The Samaritan</h3>
          <p>When justice meets corruption, who wins?</p>
          <button class="btn learn-more-btn" onclick="showProduction('samaritan')">Learn More</button>
        </div>
      </div>
      <p style="color:var(--gold);text-align:center;">2023: Major Barbara | 2022: Accidental Death of an Anarchist</p>

      <!-- NOTE: modal contains images that will be loaded by JS via data-src -->
      <div id="productionModal" aria-hidden="true" role="dialog" aria-modal="true">
        <div>
          <span id="productionClose" style="position: absolute; top: 14px; right: 34px; font-size: 2.3em; color: var(--gold); cursor: pointer;">&times;</span>
          <div id="productionModalContent"></div>
        </div>
      </div>
    </section>

    <section id="team" class="section">
      <h2>Society's Governing Body</h2>
      <div class="team-grid">
        <div class="team-card">
          <img src="images/team/Dan Kakuru.png" alt="Dan Kakuru" loading="lazy" />
          <b>Dan Kakuru</b>
          <div class="role">President: Oversees the society's activities and represents members.</div>
        </div>
        <div class="team-card">
          <img src="images/team/Leila Kaisa.png" alt="Leila Kaisa" loading="lazy" />
          <b>Leila Kaisa</b>
          <div class="role">Vice President: Assists the President and coordinates programs.</div>
        </div>
        <div class="team-card">
          <img src="images/team/Joe Abala.png" alt="Joe Abala" loading="lazy" />
          <b>Joe Abala</b>
          <div class="role">Organizing Secretary: Manages meetings, communications, and logistics.</div>
        </div>
        <div class="team-card">
          <img src="images/team/Cherise Chomba.png" alt="Cherise Chomba" loading="lazy" />
          <b>Cherise Chomba</b>
          <div class="role">Secretary General: Oversees administration and record keeping.</div>
        </div>
        <div class="team-card">
          <img src="images/team/Paula Nimurungi.png" alt="Paula Nimurungi" loading="lazy" />
          <b>Paula Nimurungi</b>
          <div class="role">Financial Manager: Handles funds, budgeting, and financial reports.</div>
        </div>
      </div>
    </section>

    <section id="articles" class="section">
      <h2>Articles & Updates</h2>
      <div class="card-grid">
        <div class="card">
          <h3>The Rise of Contemporary Theatre in Kenya</h3>
          <p>Discover how modern Kenyan playwrights are transforming traditional stage with innovative stories and styles that connect with the youth while celebrating heritage.</p>
          <button class="btn learn-more-btn" onclick="showArticle('contemporary-theatre')">Read More</button>
        </div>
        <div class="card">
          <h3>Behind the Scenes: Crafting a Stage Play</h3>
          <p>Go behind the curtains with our directors and stage managers as they share insights into script adaptation, set design, and stage coordination for a successful production.</p>
          <button class="btn learn-more-btn" onclick="showArticle('crafting-stage-play')">Read More</button>
        </div>
        <div class="card">
          <h3>The Power of Drama in Social Change</h3>
          <p>Explore how drama in Kenya is addressing social issues, inspiring community discussions, and influencing positive change through powerful storytelling.</p>
          <button class="btn learn-more-btn" onclick="showArticle('drama-social-change')">Read More</button>
        </div>
      </div>
    </section>

    <!-- Article Modal -->
    <div id="articleModal" aria-hidden="true" role="dialog" aria-modal="true">
      <div>
        <button id="articleClose" onclick="closeArticle()" style="position:absolute; top:12px; right:20px; font-size:2em; background:none; border:none; color:var(--gold); cursor:pointer;">&times;</button>
        <div id="articleModalContent"></div>
      </div>
    </div>

    <script>
      const articles = {
        "contemporary-theatre": {
          title: "The Rise of Contemporary Theatre in Kenya",
          author: "Wangudi Lameck",
          date: "March 14, 2025",
          content: `
            <p>Kenya's theatrical landscape has witnessed a revolutionary growth over the past decade. Young playwrights and theatre groups are pushing boundaries, creating innovative narratives that blend the rich tapestry of traditional storytelling with modern themes.</p>
            <p>These contemporary plays address a broad spectrum of topics—from generational conflicts and urbanization to politics and identity—resonating deeply with new audiences. Through bold experimentation in performance styles and technology integration, Kenyan theatre is carving a distinct voice on the global stage.</p>
            <p>The homegrown talent is supported by a recent surge in creative workshops, festivals, and collaborations that nourish artistic expression beyond Nairobi’s traditional spaces. This movement not only promotes original Kenyan stories but also enhances accessibility, providing diverse audiences the chance to engage meaningfully with their culture through performance.</p>
            <p>Despite challenges such as funding deficits and infrastructural limitations, enthusiasm and resourcefulness keep pushing the art forward. This renaissance signals a bright future where theatre serves as both entertainment and societal mirror for Kenya's evolving identity.</p>`
        },
        "crafting-stage-play": {
          title: "Behind the Scenes: Crafting a Stage Play",
          author: "Wangudi Lameck",
          date: "June 2, 2025",
          content: `
            <p>Bringing a stage play from script to spotlight is a complex, collaborative journey. It involves a talented mix of playwrights, directors, designers, and actors working in harmony to transform words into vibrant experiences.</p>
            <p>The process starts with deep script analysis, involving several revisions to ensure authentic dialogue and engaging pacing. Playwrights work closely with directors to adapt stories that resonate with the target audience, respecting cultural nuances and contemporary themes.</p>
            <p>Creative teams, from set designers to costume and lighting technicians, translate written words into evocative visuals. This multidisciplinary approach requires meticulous coordination, where communication and shared vision ensure an immersive theatrical experience.</p>
            <p>Rehearsals are where the magic unfolds. Actors embody characters, while directors shape performances to balance emotional depth with audience connection. Stage managers orchestrate logistics, timing, and technical runs, ensuring seamless execution during live shows.</p>
            <p>Successful productions are a testament to this painstaking yet rewarding effort, showcasing the power of theatre not only to entertain but to reflect and challenge society.</p>`
        },
        "drama-social-change": {
          title: "The Power of Drama in Social Change",
          author: "Wangudi Lameck",
          date: "October 21, 2025",
          content: `
            <p>Drama has long been a formidable tool for social change, and in Kenya, its impact continues to expand. Theatre performances open spaces to tackle tough topics such as governance, corruption, gender equality, and cultural identity.</p>
            <p>By weaving compelling narratives with relatable characters, plays invoke empathy and inspire audiences to critically reflect on societal issues. Community theatre especially reaches marginalized groups, initiating dialogues that might otherwise be inaccessible in conventional forums.</p>
            <p>Kenyan playwrights and dramatists embrace vernacular languages and local traditions, which enhances authenticity and audience engagement. This culturally rooted approach fosters inclusion, enabling diverse voices to be heard and validated.</p>
            <p>Beyond awareness raising, drama mobilizes communities towards action, influencing policy discussions and social norms. Through performances in schools, town halls, and open-air venues, drama operates as a bridge between art and activism, empowering people to envision and build better futures.</p>`
        }
      };

      /* ---------------------------
         Scroll-lock helpers
         --------------------------- */
      function lockBodyScroll() {
        // lock both html and body to be safe across devices/browsers
        document.documentElement.style.overflow = 'hidden';
        document.body.style.overflow = 'hidden';
      }
      function unlockBodyScroll() {
        document.documentElement.style.overflow = '';
        document.body.style.overflow = '';
      }

      /* ---------------------------
         History / back-button handling
         --------------------------- */
      let suppressPop = false;
      function pushModalState() {
        try {
          history.pushState({ modalOpen: true }, '');
        } catch (e) {/* ignore */}
      }
      window.addEventListener('popstate', function(event) {
        if (suppressPop) { suppressPop = false; return; }
        const prodModal = document.getElementById('productionModal');
        const artModal = document.getElementById('articleModal');
        let closed = false;
        if (prodModal && prodModal.style.display === 'flex') {
          prodModal.style.display = 'none';
          prodModal.setAttribute('aria-hidden','true');
          closed = true;
        }
        if (artModal && artModal.style.display === 'block') {
          artModal.style.display = 'none';
          artModal.setAttribute('aria-hidden','true');
          closed = true;
        }
        if (closed) unlockBodyScroll();
      });

      /* ---------------------------
         Improved Lazy Image Loader for modal images
         - Uses data-src on <img>
         - IntersectionObserver to load when visible
         - Sequential loading (small queue) to avoid many parallel downloads
         --------------------------- */

      // tiny inline SVG placeholder (very small, keeps layout)
      const PLACEHOLDER_DATAURL = 'data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22220%22 height=%22160%22 viewBox=%220 0 220 160%22%3E%3Crect width=%22220%22 height=%22160%22 fill=%22%23222%22/%3E%3C/svg%3E';

      // queue for sequential loading
      const imageLoadQueue = [];
      let loadingInProgress = false;

      function queueLoad(imgEl) {
        if (!imgEl || imgEl.dataset.loaded === 'true') return;
        imageLoadQueue.push(imgEl);
        processQueue();
      }

      function processQueue() {
        if (loadingInProgress) return;
        const next = imageLoadQueue.shift();
        if (!next) return;
        loadingInProgress = true;
        loadImage(next).finally(() => {
          loadingInProgress = false;
          // small delay between loads to reduce concurrency
          setTimeout(processQueue, 120);
        });
      }

      function loadImage(imgEl) {
        return new Promise((resolve) => {
          if (!imgEl) return resolve();
          const src = imgEl.dataset.src;
          if (!src) return resolve();
          // show spinner while loading
          const spinner = document.createElement('span');
          spinner.className = 'img-spinner';
          imgEl.parentNode && imgEl.parentNode.insertBefore(spinner, imgEl.nextSibling);

          const tmp = new Image();
          tmp.onload = function() {
            imgEl.src = src;
            imgEl.dataset.loaded = 'true';
            if (spinner && spinner.parentNode) spinner.parentNode.removeChild(spinner);
            resolve();
          };
          tmp.onerror = function() {
            // keep placeholder, remove spinner
            if (spinner && spinner.parentNode) spinner.parentNode.removeChild(spinner);
            // optionally mark an error
            imgEl.dataset.loaded = 'error';
            resolve();
          };
          // start loading
          tmp.src = src;
        });
      }

      // IntersectionObserver: when modal images enter viewport -> push to queue
      const ioOptions = { root: null, rootMargin: '160px', threshold: 0.01 };
      const modalImageObserver = new IntersectionObserver((entries) => {
        entries.forEach(ent => {
          if (ent.isIntersecting) {
            queueLoad(ent.target);
            modalImageObserver.unobserve(ent.target);
          }
        });
      }, ioOptions);

      function observeModalImages(container) {
        if (!container) return;
        const imgs = container.querySelectorAll('img[data-src]');
        imgs.forEach(img => {
          // ensure placeholder is present
          if (!img.src) img.src = PLACEHOLDER_DATAURL;
          modalImageObserver.observe(img);
        });
      }

      function unobserveAllModalImages() {
        try {
          modalImageObserver.disconnect();
        } catch (e) {}
        imageLoadQueue.length = 0;
      }

      /* ---------------------------
         Article modal functions
         --------------------------- */
      function showArticle(key) {
        const article = articles[key];
        if (!article) return;
        const modal = document.getElementById("articleModal");
        const contentDiv = document.getElementById("articleModalContent");
        contentDiv.innerHTML = `
          <h2>${article.title}</h2>
          <p><em>By ${article.author} | ${article.date}</em></p>
          ${article.content}
        `;
        modal.style.display = "block";
        modal.setAttribute('aria-hidden','false');
        lockBodyScroll();
        pushModalState();
        // No heavy images in article modal in your code, but if you add them later, call:
        // observeModalImages(contentDiv);
      }

      function closeArticle() {
        const modal = document.getElementById("articleModal");
        const state = history.state;
        if (state && state.modalOpen) {
          suppressPop = true;
          history.back();
          modal.style.display = "none";
          modal.setAttribute('aria-hidden','true');
          unlockBodyScroll();
          suppressPop = false;
        } else {
          modal.style.display = "none";
          modal.setAttribute('aria-hidden','true');
          unlockBodyScroll();
        }
      }

      /* ---------------------------
         Production modal functions (uses JS-rendered HTML with data-src images)
         --------------------------- */
      function showProduction(prod) {
        var modal = document.getElementById("productionModal");
        var content = document.getElementById("productionModalContent");
        var html = "";
        if (prod === "waiting-room") {
          html = `<h2>The Waiting Room</h2>
        <p style="margin-bottom:15px; color:var(--gold); font-size:1.1em;">
          <strong>Writer:</strong> Martin Abuya &nbsp;|&nbsp; <strong>Director:</strong> Nick Muthama
        </p>
        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <img class="modal-image" data-src="images/productions/The Waiting Room (2).jpg" alt="Waiting Room 2" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (3).jpg" alt="Waiting Room 3" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (4).jpg" alt="Waiting Room 4" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (5).jpg" alt="Waiting Room 5" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (6).jpg" alt="Waiting Room 6" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (7).jpg" alt="Waiting Room 7" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (8).jpg" alt="Waiting Room 8" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (9).jpg" alt="Waiting Room 9" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (10).jpg" alt="Waiting Room 10" />
          <img class="modal-image" data-src="images/productions/The Waiting Room (11).jpg" alt="Waiting Room 11" />
        </div>
        <p style="margin-top:18px; font-size:1.13em;">
          In a chaotic hospital waiting room, tensions mount as anxious relatives await news about a critically injured patriarch. Secrets unravel, misunderstandings abound, and comedic yet dramatic confrontations ensue. Amidst the chaos, unexpected twists reveal hidden lives and shocking truths, weaving a thrilling tale of identity, deception, and the unpredictable nature of family bonds.
        </p>`;
        } else if (prod === "homecoming") {
          html = `<h2>The Homecoming</h2>
        <p style="margin-bottom:15px; color:var(--gold); font-size:1.1em;">
          <strong>Writer:</strong> Martin Abuya &nbsp;|&nbsp; <strong>Director:</strong> Nick Muthama
        </p>
        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <img class="modal-image" data-src="images/productions/The Homecoming (1).jpg" alt="Homecoming 1" />
          <img class="modal-image" data-src="images/productions/The Homecoming (1).png" alt="Homecoming 1 png" />
          <img class="modal-image" data-src="images/productions/The Homecoming (2).jpg" alt="Homecoming 2" />
          <img class="modal-image" data-src="images/productions/The Homecoming (3).jpg" alt="Homecoming 3" />
          <img class="modal-image" data-src="images/productions/The Homecoming (4).jpg" alt="Homecoming 4" />
          <img class="modal-image" data-src="images/productions/The Homecoming (5).jpg" alt="Homecoming 5" />
          <img class="modal-image" data-src="images/productions/The Homecoming (6).jpg" alt="Homecoming 6" />
        </div>
        <p style="margin-top:18px; font-size:1.13em;">
          A tragicomedy about the Talai family's reunion and unraveling. Siblings Thomas, Tiffany, and Timothy return home after years apart, bringing old wounds, secrets, and unresolved grief following their father's death. Martin Abuya's play explores loyalty, loss, generational conflict, and what "home" truly means in Kenya today.
        </p>`;
        } else if (prod === "samaritan") {
          html = `<h2>The Samaritan</h2>
        <p style="margin-bottom:15px; color:var(--gold); font-size:1.1em;">
          <strong>Writer:</strong> John Lara &nbsp;|&nbsp; <strong>Director:</strong> Nick Muthama
        </p>
        <div style="display:flex; gap:12px; flex-wrap:wrap;">
          <img class="modal-image" data-src="images/productions/The Samaritan (1).jpg" alt="Samaritan 1" />
          <img class="modal-image" data-src="images/productions/The Samaritan (2).jpg" alt="Samaritan 2" />
          <img class="modal-image" data-src="images/productions/The Samaritan (3).jpg" alt="Samaritan 3" />
          <img class="modal-image" data-src="images/productions/The Samaritan (4).jpg" alt="Samaritan 4" />
          <img class="modal-image" data-src="images/productions/The Samaritan (5).jpg" alt="Samaritan 5" />
          <img class="modal-image" data-src="images/productions/The Samaritan (6).jpg" alt="Samaritan 6" />
          <img class="modal-image" data-src="images/productions/The Samaritan (7).jpg" alt="Samaritan 7" />
          <img class="modal-image" data-src="images/productions/The Samaritan (8).jpg" alt="Samaritan 8" />
          <img class="modal-image" data-src="images/productions/The Samaritan (9).jpg" alt="Samaritan 9" />
        </div>
        <p style="margin-top:18px; font-size:1.13em;">
          This stage drama exposes political corruption and the fight for justice. Mayor Mossi and city leaders try to suppress The Samaritan App, while idealistic teacher Nicole and her students battle for transparency. Betrayals, courtroom drama, and social commentary combine in a bold call for civic courage in Kenyan life.
        </p>`;
        }
        content.innerHTML = html;

        // show modal
        modal.style.display = "flex";
        modal.setAttribute('aria-hidden','false');
        lockBodyScroll();
        pushModalState();

        // Observe & queue images inside the modal
        observeModalImages(content);
      }

      // Production modal close - wired to the X span
      document.addEventListener('DOMContentLoaded', function() {
        const prodClose = document.getElementById('productionClose');
        if (prodClose) {
          prodClose.addEventListener('click', function() {
            const modal = document.getElementById('productionModal');
            const state = history.state;
            if (state && state.modalOpen) {
              suppressPop = true;
              history.back();
              modal.style.display = 'none';
              modal.setAttribute('aria-hidden','true');
              unlockBodyScroll();
              unobserveAllModalImages();
              suppressPop = false;
            } else {
              modal.style.display = 'none';
              modal.setAttribute('aria-hidden','true');
              unlockBodyScroll();
              unobserveAllModalImages();
            }
          });
        }

        // also wire article close button to cleanup (in case of images)
        const artClose = document.getElementById('articleClose');
        if (artClose) {
          artClose.addEventListener('click', function() {
            closeArticle();
            unobserveAllModalImages();
          });
        }
      });

      // closeArticle() re-defined to ensure consistent cleanup
      function closeArticle() {
        const modal = document.getElementById("articleModal");
        const state = history.state;
        if (state && state.modalOpen) {
          suppressPop = true;
          history.back();
          modal.style.display = "none";
          modal.setAttribute('aria-hidden','true');
          unlockBodyScroll();
          suppressPop = false;
        } else {
          modal.style.display = "none";
          modal.setAttribute('aria-hidden','true');
          unlockBodyScroll();
        }
        // ensure any observers are cleaned if any images were added to article
        unobserveAllModalImages();
      }

      /* ---------------------------
         Click outside -> close modals
         --------------------------- */
      window.addEventListener('click', function(event) {
        const prodModal = document.getElementById('productionModal');
        const artModal = document.getElementById('articleModal');
        if (event.target === prodModal) {
          const state = history.state;
          if (state && state.modalOpen) {
            suppressPop = true;
            history.back();
            prodModal.style.display = 'none';
            prodModal.setAttribute('aria-hidden','true');
            unlockBodyScroll();
            unobserveAllModalImages();
            suppressPop = false;
          } else {
            prodModal.style.display = 'none';
            prodModal.setAttribute('aria-hidden','true');
            unlockBodyScroll();
            unobserveAllModalImages();
          }
        }
        if (event.target === artModal) {
          const state = history.state;
          if (state && state.modalOpen) {
            suppressPop = true;
            history.back();
            artModal.style.display = 'none';
            artModal.setAttribute('aria-hidden','true');
            unlockBodyScroll();
            unobserveAllModalImages();
            suppressPop = false;
          } else {
            artModal.style.display = 'none';
            artModal.setAttribute('aria-hidden','true');
            unlockBodyScroll();
            unobserveAllModalImages();
          }
        }
      });

      /* ---------------------------
         ESC key closes modals
         --------------------------- */
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          const prodModal = document.getElementById('productionModal');
          const artModal = document.getElementById('articleModal');
          let closed = false;
          if (prodModal && prodModal.style.display === 'flex') {
            const state = history.state;
            if (state && state.modalOpen) {
              suppressPop = true;
              history.back();
              suppressPop = false;
            } else {
              prodModal.style.display = 'none';
              prodModal.setAttribute('aria-hidden','true');
            }
            closed = true;
            unobserveAllModalImages();
          }
          if (artModal && artModal.style.display === 'block') {
            const state = history.state;
            if (state && state.modalOpen) {
              suppressPop = true;
              history.back();
              suppressPop = false;
            } else {
              artModal.style.display = 'none';
              artModal.setAttribute('aria-hidden','true');
            }
            closed = true;
          }
          if (closed) unlockBodyScroll();
        }
      });
    </script>

    <section id="contact" class="section">
      <h2>Contact Us</h2>
      <div class="social-icons" style="margin-top:8px; display:flex; gap:15px;">
        <a href="https://instagram.com/strathmore.drama.society" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <img src="images/social/Instagram.jpg" alt="Instagram" width="32" height="32" style="display:block;" loading="lazy">
        </a>

        <a href="https://www.youtube.com/@StrathmoreDramaSociety" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
          <img src="images/social/Youtube.webp" alt="YouTube" width="32" height="32" style="display:block;" loading="lazy">
        </a>

        <a href="https://www.tiktok.com/@strathmore.drama.society" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
          <img src="images/social/Tiktok.jpg" alt="TikTok" width="32" height="32" style="display:block;" loading="lazy">
        </a>
      </div>
    </section>

  </main>

  <footer>
    &copy; 2025 Strathmore Drama Society (DRAMSOC)
  </footer>

  <!-- NEW: Toggle JS (transparent panel; smaller gold text; overlay; X toggle) -->
  <script>
    (function(){
      const toggle = document.getElementById('menuToggle');
      const nav = document.getElementById('mainNav');
      const closeBtn = document.getElementById('closePanel');
      const overlay = document.getElementById('overlay');

      function openMenu(){
        nav.classList.add('menu-active');
        nav.setAttribute('aria-hidden','false');
        toggle.setAttribute('aria-expanded','true');
        if (closeBtn) closeBtn.style.display = 'block';
        overlay.classList.add('active');
        document.documentElement.style.overflow = 'hidden';
        document.body.style.overflow = 'hidden';
        toggle.textContent = '✖';
      }

      function closeMenu(){
        nav.classList.remove('menu-active');
        nav.setAttribute('aria-hidden','true');
        toggle.setAttribute('aria-expanded','false');
        if (closeBtn) closeBtn.style.display = 'none';
        overlay.classList.remove('active');
        document.documentElement.style.overflow = '';
        document.body.style.overflow = '';
        toggle.textContent = '☰';
      }

      // expose for inline uses
      window.closeMenu = closeMenu;

      // toggle click/keyboard
      toggle.addEventListener('click', function(e){ if (nav.classList.contains('menu-active')) closeMenu(); else openMenu(); });
      toggle.addEventListener('keydown', function(e){ if (e.key==='Enter' || e.key===' ') { e.preventDefault(); toggle.click(); } });

      // closeBtn inside panel
      if (closeBtn) closeBtn.addEventListener('click', closeMenu);

      // overlay click closes
      overlay.addEventListener('click', closeMenu);

      // links inside nav close panel when clicked
      nav.addEventListener('click', function(e){
        if (e.target && e.target.tagName === 'A') {
          // let the anchor jump first (browser), then close menu
          closeMenu();
        }
      });

      // ESC closes
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape' && nav.classList.contains('menu-active')) closeMenu();
      });

      // clicking outside the panel closes it on small screens
      document.addEventListener('click', function(e){
        const isSmall = window.matchMedia('(max-width:700px)').matches;
        if (!isSmall) return;
        const clickedInside = nav.contains(e.target) || toggle.contains(e.target) || overlay.contains(e.target);
        if (!clickedInside && nav.classList.contains('menu-active')) closeMenu();
      });
    })();
  </script>
</body>
</html>
